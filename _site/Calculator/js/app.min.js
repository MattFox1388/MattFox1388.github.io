var app=angular.module('calculator',[]);app.controller('calcCtrl',function(){var numberEnteredLast=!1;var unused=!0;this.str='0';var unorderedList=[];this.view=function(num){if(this.str.length<=15){if(unused){this.str=num.toString();unused=!1}else{this.str=this.str.concat(num.toString())}
unorderedList.push()
numberEnteredLast=!0}}
function pushLastNum(str){var startIndex=0;var arr=str.split('')
for(var i=arr.length-1;i>=0;i--){if(isNaN(arr[i])){if((i===0&&arr[i]==='-')||arr[i]==='.'){break}
startIndex=i+1;break}}
return startIndex}
this.addOperation=function(char){if(this.str.length<=15){if(numberEnteredLast){startIndex=pushLastNum(this.str);unorderedList.push(this.str.substring(startIndex));this.str=this.str.concat(char.toString());unorderedList.push(char)}
numberEnteredLast=!1;unused=!1}}
this.clearStacks=function(){numberEnteredLast=!1;unused=!0;this.str='0';calculationStk=[];unorderedList=[]}
this.equals=function(){console.log("original string:"+this.str);startIndex=pushLastNum(this.str);unorderedList.push(this.str.substring(startIndex));console.log('UnorderedList: '+unorderedList);var array=postfix(unorderedList);console.log("unorderedList Postfix: "+array);var newStr=calculatePostfix(array);console.log(newStr);numberEnteredLast=!1;unused=!0;this.str='0';calculationStk=[];unorderedList=[];this.view(Number(newStr));this.str=Number(this.str).toString()}
function postfix(arr){var calculationStk=[];var newArr=[];var num=arr[arr.length-1];if(isNaN(num)){arr.pop()}
for(var i=0;i<arr.length;i++){var elem=arr[i];if(!isNaN(elem)){newArr.push(elem)}else{if(0===calculationStk.length){calculationStk.push(elem)}else{if((elem==="-"||elem==="+")&&(calculationStk[calculationStk.length-1]==='*'||calculationStk[calculationStk.length-1]==='/')){while(calculationStk.length!==0){newArr.push(calculationStk.pop())}
calculationStk.push(elem)}else{calculationStk.push(elem)}}}}
while(calculationStk.length!==0){newArr.push(calculationStk.pop())}
return newArr}
function calculatePostfix(arr){var numberStk=[];var firstNum;var secondNum;for(var i=0;i<arr.length;i++){var elem=arr[i];if(!isNaN(elem)){numberStk.push(elem)}else{secondNum=numberStk.pop();firstNum=numberStk.pop();numberStk.push(eval(firstNum+' '+elem+' '+secondNum))}}
return numberStk.pop()}})
